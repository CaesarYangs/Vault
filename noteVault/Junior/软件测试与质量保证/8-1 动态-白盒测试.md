# 白盒测试

- *Q：什么是白盒测试？*
- *Q：常见的白盒测试有哪些？*

- ==**Q：什么是白盒测试？**==
    - 需要对系统内部的结构和工作原理有一个清楚的了解，并基于这个知识来设计测试用例
    - 结构测试、逻辑驱动测试
    - 使用白盒测试的测试用例能够：
        - **保证一个模块中的所有独立路径至少被使用一次**
        - **对所有逻辑值均需测试 true 和 false；**
        - **在上下边界及可操作范围内运行所有循环；**
        - **检查内部数据结构以确保其有效性。**

- **白盒测试的分类**
    - **静态测试**
        - 不实际运行软件，主要对软件的编程格式、结构等方面进行评估
        - 静态分析技术的结果
            - 必须修改的问题
            - 建议修改的问题
    - **动态测试**
        - 需要实际运行软件，并使用设计的测试用例去探测软件缺陷

## 白盒测试常用技术
### 静态分析技术
- <u>静态分析技术</u>[](marginnote3app://note/020257A4-2B5C-4918-87D3-62A38E8D0EEA)
    - 必须修改的问题：注释、子函数无返回值类型、精读丢失...
    - 建议修改的问题：main 函数没有返回值类型和参数列表、空行、变量定义

**静态分析技术**
- 不通过执行程序而进行的测试的技术
- 关键功能是检查软件的表示和描述是否一致
- 目的是纠正软件系统在描述、表示和规格上的错误

### 动态分析技术
- **动态分析**
    - 实际运行软件，并使用设计的测试用例去探测软件缺陷。
- 类别
    - 测试覆盖率分析
    - 跟踪
    - 调整
    - 模拟
    - 断言检查

### 动态分析技术——覆盖率
- **覆盖率**
    - 度量测试完整性的一个手段
    - 逻辑覆盖和功能覆盖
    - 测试技术有效性的一个度量
- **覆盖率的计算公式**
    - $$覆盖率 = （至少被执行一次的 item 数）/ item 的总数$$

- **逻辑覆盖率**
    - 代码覆盖率或者结构化覆盖率
    - 属于白盒测试的范畴
    - 常见的逻辑覆盖率：
        - 语句覆盖、判定覆盖、条件覆盖、判定条件覆盖、路径覆盖等

#### 语句覆盖
***选择足够多的测试用例，使程序中每一可执行语句至少执行一次***
- **语句覆盖**
    - <u>语句覆盖</u>[](marginnote3app://note/F52D1E78-937A-4930-996D-19328AEBEF23)
    - 设计若干个测试用例，使程序中的每个可执行语句至少执行一次
    - $$语句覆盖率 = \frac{(至少被执行一次的语句数量)}{可执行的语句总数}$$
    - ![](https://github.com/CaesarYangs/MyPictureHotel/blob/main/JuniorClass/SoftwareTesting/%E6%88%AA%E5%B1%8F2022-04-23%2017.19.57.png?raw=true)

#### 判定（分支）覆盖
***选择足够多的测试用例，使程序中每个判定的"真"和"假"至少执行一次***
- **判定覆盖**
    - <u>判定覆盖</u>[](marginnote3app://note/9EE29DE2-EF06-467C-AE42-4011F9351A3B)
    - 分支覆盖
    - 设计若干个测试用例，使得程序中的每个判断至少取真分支和假分支一次，即判断的真假值均曾被满足
    - $$判断覆盖率 = \frac{(判定结果被评价的次数)}{判定结果的总数}$$

#### 条件覆盖
***选择足够多的测试用例，使程序中每个判定的每个条件取得各种可能的结果***
- **条件覆盖**
    - <u>条件覆盖</u>[](marginnote3app://note/CC5FD4E4-5BF0-4B89-900F-3688DFBBC1B8)
    - 设计若干个测试用例，使每个判断中每个条件的可能取值至少满足一次
    - $$条件覆盖率 = \frac{(条件操作数值至少被评价一次的数量)}{条件操作数值的总数}$$
    - ![](https://raw.githubusercontent.com/CaesarYangs/MyPictureHotel/main/BasicImg/%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95-%E6%9D%A1%E4%BB%B6%E8%A6%86%E7%9B%96.png)
    - ![](https://raw.githubusercontent.com/CaesarYangs/MyPictureHotel/main/BasicImg/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95-%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95-%E6%9D%A1%E4%BB%B6%E8%A6%86%E7%9B%96.png)

#### 判定条件覆盖
***选择足够多的测试用例，使程序中每个判定的"真"和"假"至少执行一次，并且每个判定的每个条件取得各种可能的结果。***
- **判定条件覆盖**
    - <u>判定条件覆盖</u>[](marginnote3app://note/DE05DE6F-3341-4DE8-9AE4-FDE99CE19600)
    - 又叫作分支条件覆盖
    - 设计若干个测试用例，使得判断中每个条件的所有可能值（为真为假）至少出现一次，且每个判断本身的判定结果（为真为假）也至少出现一次
    - $$判断覆盖率 = \frac{(条件操作数值或判定结果至少被评价一次的数量)}{条件操作数值总数 + 判定结果总数}$$

#### 路径覆盖
***### 选择足够多的测试用例，使程序中每条路径至少执行一次***
- **路径覆盖**
    - <u>路径覆盖</u>[](marginnote3app://note/A72E2739-7599-412E-B021-011C3F0022D6)
    - 设计若干个测试用例，要求覆盖程序中所有可能的路径
    - $$路径覆盖率 = \frac{(至少被执行一次的路径数)}{总的路径数}$$

 [语句覆盖，判定覆盖，条件覆盖，条件/判定覆盖，条件组合覆盖，路径覆盖_Rebright-崇明的博客-CSDN 博客_语句覆盖](https://blog.csdn.net/qq_39630587/article/details/85990576)

### 路径测试
#### DD 路径测试
- **Decision-to-Decision Path**
    - 对有向图中线性串行部分进行压缩，在压缩图（路径）的基础上进行测试用例设计
    - DD 的路径图是有向图，其中节点表示其程序图 DD 路径，边表示连续 DD 路径之间的控制流。
    - **合并原则：将一系列邻接的无分支的节点合并**

- DD 路径测试评价
    - 很多质量机构把 DD 路径覆盖作为测试覆盖的最低可接受级别。
    - 数据显示通过一组测试用例满足路径覆盖要求时，可以发现全部缺陷中的大约 85%。

#### 基本路径测试
- McCabe 的基路径方法
    - 首先计算**圈复杂度**，并用该复杂度为指南定义执行路径的基本集合，从该**基本集合中导出测试用例**。
    - **保证程序中每条语句至少执行一次，并且每个条件在执行时都分别取真、假两种值**

- **基本路径测试流程**
    - 1. 画出程序流图
    - 2. 计算圈复杂度
    - 3. 确定线性独立路径的基本集合
    - 4. 设计可强制执行基本集合中每条路径的测试用例

**圈复杂度的计算**
$$强连通图的圈复杂度 = 边数 - 节点数 + 2$$
- <u>圈复杂度对应着独立路径数目</u>[](marginnote3app://note/DEA8EB5D-D52D-4863-B8AD-5433E75A8C16)
    - 有几个圈复杂度就有几个独立的路径
    - 独立路径必须包含一条在定义之前不曾用到的边。
