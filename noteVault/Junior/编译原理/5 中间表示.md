- 若采用最简单结构
    - 只有一种中间表示——抽象语法树
- 通常的线代编译器
    - 中间表示 1
    - 中间表示 2
    - 更多的翻译和中间表示
    - 最终生成汇编代码

# 中间代码
- 树和有向无环图（DAG）
    - 高层表示，适用于程序源代码
- 三地址码（3-address code）
    - 低层表示，靠近目标机器
- 控制流图（CFG Control-FLow- Graph）
    - 更精细的三地址码，程序的图状表示
    - 适合做程序分析、程序分析等
- 静态单赋值形式（SSA）
    - 更精细的控制流图
    - 同时编码控制流信息和数据流信息
- 连续传递风格（CPS）
    - 函数式编程中常用 可以做到跨函数级别
    - 更一般的 SSA

# 三地址码
- 首先从抽象语法树中过来
- 且往往由语义分析器生成
- 在最简单的编译器结构中增加了一个三地址码中间表示

- **三地址码基本思想**
    - **给每个中间变量和计算结果命名**
        - 没有复合表达式
    - 只有最基本的控制流 即：原子操作
        - 没有各种控制结构
        - 只有 goto，call 等
    - 所以三地址码可以看成是抽象的指令集
        - 通用的 RISC
        - 并没有做出特定绑定

- 实例
    - ![](https://raw.githubusercontent.com/CaesarYangs/MyPictureHotel/main/BasicImg/202205241642020.png)

## 三地址码的定义
- 类似于上下文无关文法的定义方式
    - ![](https://raw.githubusercontent.com/CaesarYangs/MyPictureHotel/main/BasicImg/202205241645332.png)

## 三地址码数据结构
- 定义数据结构
    - 每个三地址码定义一个数据结构来准备表示
    - ![](https://raw.githubusercontent.com/CaesarYangs/MyPictureHotel/main/BasicImg/202205241647238.png)

## 生成三地址码
- 从 C--生成三地址码
    - ![](https://raw.githubusercontent.com/CaesarYangs/MyPictureHotel/main/BasicImg/202205241648370.png)
- 给每个非终结符写相应的递归调用函数

## 给语句的代码生成

## 小结
- 三地址码优点：
    - 所有的操作都是原子的
        - 变量 没有复合结构
    - 控制流被简化了
        - 只有跳转、
    - 是抽象的机器代码
        - 向后做代码生成更容易
- 三地址码的不足：
    - 程序的控制流信息是隐式的
    - 可以做进一步的控制流分析
- 从三地址码生成汇编代码更加容易
